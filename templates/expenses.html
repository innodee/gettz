{% extends "base.html" %}
{% block content %}

<h2>Expenses</h2>

<!-- Add Expense -->
<div class="card">
  <form method="post">
    <div class="grid">
      <div>
        <label>Date</label>
        <input type="date" name="expense_date" required>
      </div>

      <div style="grid-column: span 2;">
        <label>Description</label>
        <input type="text" name="description" required>
      </div>
    </div>

    <div class="grid" style="margin-top:10px;">
      <div>
        <label>Amount</label>
        <input type="number" step="0.01" name="amount" required>
      </div>

      <div style="display:flex; align-items:flex-end;">
        <button type="submit">Add Expense</button>
      </div>
    </div>
  </form>
</div>

<!-- Expenses List -->
<h3>Recent Expenses</h3>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Description</th>
      <th>Amount</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    {% for r in rows %}
      <tr>
        <td>{{ r.expense_date }}</td>
        <td>{{ r.description }}</td>
        <td>{{ "%.2f"|format(r.amount) }}</td>
        <td>
          <div class="btn-row">
            <a class="btn" href="{{ url_for('edit_expense', expense_id=r.id) }}">
              Edit
            </a>

            <form method="post"
                  action="{{ url_for('delete_expense', expense_id=r.id) }}"
                  onsubmit="return confirm('Delete this expense?');">
              <button type="submit" class="btn btn-danger">
                Delete
              </button>
            </form>
          </div>
        </td>
      </tr>
    {% else %}
      <tr>
        <td colspan="4" class="small" style="text-align:center;">
          No expenses recorded yet.
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
